var loadUtils = require('../').loadUtils;
var should = require('should');
var path = require('path');
require('mocha');
var util;

beforeEach(function(){
  	util = {};
  	loadUtils(util);
});

describe('loadUtils()', function(){
  it('should load default utils', function(done){

	util.beep.should.be.a.Function;
	util.isBuffer.should.be.a.Function;

    done();
  });
  it('should load requested utils', function(done){

  	loadUtils(util, ['colors', 'date']);
  	util.should.have.property('colors');
  	util.colors.should.have.property('red');
  	util.should.have.property('date');

    done();
  });
  it('should load non-default utils only when requested', function(done){

	Object.getOwnPropertyDescriptor( util, 'colors' )
  		.get.should.throw();

  	loadUtils(util, ['colors', 'date']);

	Object.getOwnPropertyDescriptor( util, 'env' )
  		.get.should.throw();

    done();
  });
});